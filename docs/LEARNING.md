# 学習ノート (LEARNING.md)

このファイルは、Geminiとの対話を通じて得られた重要な概念、設計の考え方、コーディングのヒントなどを記録するためのものです。

---

## 1. プロジェクトの基本情報と設計思想

*   **技術スタック**: Next.js (App Router), TypeScript, microCMS, Tailwind CSS, React (Server Components)
*   **設計原則**:
    *   **関心の分離**: UI、ビジネスロジック、外部連携が明確に分離されている。
    *   **Feature-Sliced Design**: `src/features`のように機能ごとにコードをまとめることで、メンテナンス性と拡張性を高めている。
*   **microCMS連携**:
    *   `src/lib/microcms/client.ts`: microCMS APIとの接続クライアントを初期化する役割。環境変数 (`MICROCMS_SERVICE_DOMAIN`, `MICROCMS_API_KEY`) を使用し、セキュリティと柔軟性を確保。
    *   `src/lib/microcms.ts`: `client.ts`で初期化されたクライアントを利用し、具体的なデータ取得処理（例: `getAllContents`, `getContentBySlug`）を提供するラッパー関数群。
    *   `src/features/works/api.ts`: `src/lib/microcms.ts`の関数を利用して、`works`機能に特化したデータ取得ロジックを提供する。

---

## 2. 基本的な構文と概念

### 2.1. `if`文 (条件分岐)

*   **目的**: ある条件が真（true）の場合にのみ、特定のコードブロックを実行する。
*   **構文**:
    ```typescript
    if (条件式) {
      // 条件式が真の場合に実行
    } else { // elseは省略可能
      // 条件式が偽の場合に実行
    }
    ```
*   **`!` (否定) 演算子**: 条件式の前に付けると「〜ではない」という意味になる。
    *   例: `if (!someVariable)` は `someVariable` が `undefined`, `null`, `0`, `false`, `''` (空文字列) の場合に真となる。
*   **プロジェクトでの使用例**: 環境変数が設定されているかどうかのチェック (`if (!process.env.MICROCMS_SERVICE_DOMAIN)`)。

### 2.2. `throw new Error()` (エラーの発生)

*   **目的**: プログラムの実行中に、これ以上処理を続行できないような異常事態が発生したことを明示的に知らせ、処理を中断させる。
*   **構文**:
    ```typescript
    throw new Error('エラーメッセージ');
    ```
*   **`new Error('メッセージ')`**: エラーに関する情報を持つ`Error`オブジェクトを作成。
*   **`throw`**: 作成した`Error`オブジェクトを「投げ」、現在の処理を中断し、呼び出し元にエラーを伝播させる。
*   **防御的プログラミング**: 必要な設定がないなど、前提条件が満たされない場合に早期にエラーを発生させることで、予期せぬバグを防ぎ、問題の特定を容易にする。
*   **プロジェクトでの使用例**: 必須の環境変数が未定義の場合にエラーを発生させ、開発者に通知する。

---

## 3. コードリーディングの進め方

1.  **全体像を把握 (トップダウン)**: ファイルや機能が「何をするものか」という大きな目的から入る。
2.  **依存関係を見る (`import`文)**: `import`文から、そのファイルが何に依存し、どこから何を持ってきているかを把握する。
3.  **関数やコンポーネントの入出力を見る**: 引数と戻り値に注目し、その機能がシステム内でどのような役割を果たすかを理解する。
4.  **一度にすべてを理解しようとしない**: 大まかな理解から始め、疑問点はメモし、後で深掘りする。
5.  **実際に動かしてみる**: プログラムを実行し、挙動を観察する。デバッガーや`console.log()`を活用する。
6.  **小さな変更を加えてみる**: コードの挙動を理解するために、意図的に変更を加えてみる。
7.  **質問する**: 分からない点は積極的に質問する。

---

## 4. コードの書き方

1.  **小さな目標を設定する**: 大きなタスクを、達成可能な小さなステップに分解する。
2.  **まず日本語（または擬似コード）で考える**: コードを書く前に、実現したいことを自分の言葉で整理する。
3.  **既存のパターンを真似る**: プロジェクト内の既存コードを参考に、書き方や構造を学ぶ。
4.  **少しずつ書いて、少しずつ動かす (インクリメンタル開発)**: 短いコードを書き、すぐに動作確認を行う。
5.  **ドキュメントを読む**: ライブラリやフレームワークの公式ドキュメントを積極的に活用する。
6.  **エラーメッセージをよく読む**: エラーは問題解決のヒント。内容を理解しようと努める。

---

## 5. 学習と記憶について

*   **忘れるのは自然なこと**: 使わない情報は忘れるのが普通。
*   **重要なのは「思い出す力」**: すべてを記憶するのではなく、必要な時に「どこを見れば解決できるか」を知っていることが重要。
*   **実践が一番の記憶術**: 実際にコードを書き、動かし、問題を解決する経験が知識を定着させる。
*   **質問する習慣**: 分からないことをすぐに質問することで、理解を深め、誤解を防ぐ。
